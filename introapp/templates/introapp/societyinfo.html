<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../../../static/css/societyinfo.css">
</head>
<script>

    function CheckForm(Join){
        const checkboxchecked = 'input[name="region[]"]:checked';
        const selectedElements =
        document.querySelectorAll(checkboxchecked);

        const selectedElementsCnt = selectedElements.length;


        if(!(selectedElementsCnt==1)){
            alert("지역을 하나만 선택해주세요");
            return false;
        }

    }
</script>
<body>
<div id="wrap">
    <div id="contents" class="customer">
        <!-- Donut 상단 로고 -->
        <h1 id="top_logo">
            <img src="../../../static/img/donut.png" alt="">
            <a href="{% url 'introapp:home' %}">Donut</a>
        </h1>

        <!-- 페이지 소개 -->

        <div id="nav">
            <div class="inner_cont customer_cont">
                <div class="section section-top">
                    <div class="inner">
                        <h3>단체 소개</h3>
                        <div class="line pink"></div>
                        <h4>기부 단체 한 눈에 보기</h4>
                        <div class="blank_line"></div>
                        <p>
                            Donut에 방문해 주셔서 감사합니다.
                        </p>
                    </div>
                </div>
            </div>

            <!-- 읍면동 선택 -->
            <div id="map_wrap" style="clear: both;">
                <div class = "region_filter">
                    <div class="checkbox_filter">
                        <form method="POST" id="checkbox_filter_id" name="checkbox_organization" action="{% url 'introapp:societyinfo' %}" onSubmit="return CheckForm(this)">
                            {% csrf_token %}

                            <div class="region_eup">
                                <h4>읍</h4>

                                <input type="checkbox" name="region[]" id="eup1" value="조치원읍" onclick='CheckForm()' style="display: none;" class="dong"/>
                                <label for="eup1" style="cursor:pointer; font-size: 14px; width: 150px;" class="on">조치원읍</label>
                            </div>

                            <div class="region_dong">
                                <h4>면</h4>
                                <input type="checkbox" name="region[]" id="myeon1" value="연기면" onclick='CheckForm()' class="dong"/>
                                <label for="myeon1" class="on"> 연기면 </label>

                                <input type="checkbox" name="region[]" id="myeon2" value="연동면" onclick='CheckForm()' class="dong"/>
                                <label for="myeon2" class="on"> 연동면</label>

                                <input type="checkbox" name="region[]" id="myeon3" value="부강면" onclick='CheckForm()' class="dong"/>
                                <label for="myeon3" class="on"> 부강면</label>

                                <input type="checkbox" name="region[]" id="myeon4" value="금남면" onclick='CheckForm()' class="dong"/>
                                <label for="myeon4" class="on"> 금남면</label>

                                <input type="checkbox" name="region[]" id="myeon5" value="장군면" onclick='CheckForm()' class="dong"/>
                                <label for="myeon5" class="on"> 장군면</label>

                                <input type="checkbox" name="region[]" id="myeon6" value="연서면" onclick='CheckForm()' class="dong"/>
                                <label for="myeon6" class="on"> 연서면</label>

                                <input type="checkbox" name="region[]" id="myeon7" value="전의면" onclick='CheckForm()' class="dong"/>
                                <label for="myeon7" class="on"> 전의면</label>

                                <input type="checkbox" name="region[]" id="myeon8" value="전동면" onclick='CheckForm()' class="dong"/>
                                <label for="myeon8" class="on"> 전동면</label>

                                <input type="checkbox" name="region[]" id="myeon9" value="소정면" onclick='CheckForm()' class="dong"/>
                                <label for="myeon9" class="on"> 소정면</label>
                            </div>

                            <div class="region_dong">
                                <h4>동</h4>

                                <input type="checkbox" name="region[]" id="dong1" value="한솔동" onclick='CheckForm()' class="dong"/>
                                <label for="dong1" class = "on"> 한솔동</label>

                                <input type="checkbox" name="region[]" id="dong2" value="도담동" onclick='CheckForm()' class="dong"/>
                                <label for="dong2" class = "on"> 도담동</label>

                                <input type="checkbox" name="region[]" id="dong3" value="아름동" onclick='CheckForm()' class="dong"/>
                                <label for="dong3" class = "on"> 아름동</label>

                                <input type="checkbox" name="region[]" id="dong4" value="종촌동" onclick='CheckForm()' class="dong"/>
                                <label for="dong4" class = "on"> 종촌동</label>

                                <input type="checkbox" name="region[]" id="dong5" value="고운동" onclick='CheckForm()' class="dong"/>
                                <label for="dong5" class = "on"> 고운동</label>

                                <input type="checkbox" name="region[]" id="dong6" value="보람동" onclick='CheckForm()' class="dong"/>
                                <label for="dong6" class = "on"> 보람동</label>

                                <input type="checkbox" name="region[]" id="dong7" value="새롬동" onclick='CheckForm()' class="dong"/>
                                <label for="dong7" class = "on"> 새롬동</label>

                                <input type="checkbox" name="region[]" id="dong8" value="대평동" onclick='CheckForm()' class="dong"/>
                                <label for="dong8" class = "on"> 대평동</label>

                                <input type="checkbox" name="region[]" id="dong9" value="소담동" onclick='CheckForm()' class="dong"/>
                                <label for="dong9" class = "on"> 소담동</label>

                                <input type="checkbox" name="region[]" id="dong10" value="다정동" onclick='CheckForm()'class="dong"/>
                                <label for="dong10" class = "on"> 다정동</label>

                                <input type="checkbox" name="region[]" id="dong11" value="해밀동" onclick='CheckForm()'class="dong"/>
                                <label for="dong11" class = "on"> 해밀동</label>

                                <input type="checkbox" name="region[]" id="dong12" value="반곡동" onclick='CheckForm()'class="dong"/>
                                <label for="dong12" class = "on"> 반곡동</label>

                            </div>
                        </form>

                        <!-- 제출 / 초기화 버튼 -->
                        <div class = "btn-group">
                            <input type="submit" form="checkbox_filter_id" class="btn btn-dark rounded-pill">

                            <input type="reset" class="btn btn-white rounded-pill">
                        </div>
                    </div>
                </div>


            <!-- 지도 -->
                <div id="map">
                   <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=3484f791cc128fd4a942d09c56cd52e5"></script>
                   <script>
                       var container = document.getElementById('map');

                       {% if matchingresult.0 != None %}
                           var options = {
                               center: new kakao.maps.LatLng({{ matchingresult.0.latitude }},{{ matchingresult.0.longitude }}),
                               level: 3
                           };
                       {% else %}
                           var options = {
                               center: new kakao.maps.LatLng(36.4833, 127.2618),
                               level: 3
                           };
                       {% endif %}

                       var map = new kakao.maps.Map(container, options);

                       var positions = new Array();

                       {% for result in matchingresult %}
                           latlng = new kakao.maps.LatLng({{result.latitude}}, {{result.longitude}});
                           positions.push({title: '{{result.society}}', latlng: latlng})
                           console.log('{{result.society}}')
                       {% endfor %}

                       var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";

                       for (var i = 0; i < positions.length; i ++) {

                           var imageSize = new kakao.maps.Size(24, 35);

                           var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);

                           var marker = new kakao.maps.Marker({
                               map: map, // 마커를 표시할 지도
                               position: positions[i].latlng, // 마커를 표시할 위치
                               title : positions[i].title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀 표시
                               image : markerImage // 마커 이미지
                           });
                       }
                   </script>
                </div>
            </div>
        </div>
    </div>

    <div id="footer">
        <address>
            <em><a href="{% url 'introapp:home' %}" class="logo"><span class="blind"></span></a></em>
            <em class="copy">고려대학교 세종캠퍼스</em>
            <em class="u_cri">©</em>
            <a href="{% url 'introapp:home' %}" class="u_cra">Donut</a>
        </address>
    </div>
</div>
</body>
</html>